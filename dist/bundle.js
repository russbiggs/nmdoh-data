/*! For license information please see bundle.js.LICENSE.txt */
!function(t){function e(e){for(var s,i,n=e[0],r=e[1],o=0,h=[];o<n.length;o++)i=n[o],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&h.push(a[i][0]),a[i]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);for(l&&l(e);h.length;)h.shift()()}var s={},a={0:0};function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(t){var e=[],s=a[t];if(0!==s)if(s)e.push(s[2]);else{var n=new Promise((function(e,i){s=a[t]=[e,i]}));e.push(s[2]=n);var r,o=document.createElement("script");o.charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.src=function(t){return i.p+""+t+".bundle.js"}(t);var l=new Error;r=function(e){o.onerror=o.onload=null,clearTimeout(h);var s=a[t];if(0!==s){if(s){var i=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+n+")",l.name="ChunkLoadError",l.type=i,l.request=n,s[1](l)}a[t]=void 0}};var h=setTimeout((function(){r({type:"timeout",target:o})}),12e4);o.onerror=o.onload=r,document.head.appendChild(o)}return Promise.all(e)},i.m=t,i.c=s,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i.oe=function(t){throw console.error(t),t};var n=window.webpackJsonp=window.webpackJsonp||[],r=n.push.bind(n);n.push=e,n=n.slice();for(var o=0;o<n.length;o++)e(n[o]);var l=r;i(i.s=0)}([function(t,e,s){"use strict";s.r(e);var a=function(t){return t=t||Object.create(null),{on:function(e,s){(t[e]||(t[e]=[])).push(s)},off:function(e,s){t[e]&&t[e].splice(t[e].indexOf(s)>>>0,1)},emit:function(e,s){(t[e]||[]).slice().map((function(t){t(s)})),(t["*"]||[]).slice().map((function(t){t(e,s)}))}}};const i=t=>"[object Object]"===Object.prototype.toString.call(t),n=(t,e)=>{const s=document.createElement(t);if(e&&"object"==typeof e)for(const t in e)"html"===t?s.innerHTML=e[t]:s.setAttribute(t,e[t]);return s},r=t=>{t instanceof NodeList?t.forEach(t=>r(t)):t.innerHTML=""},o=(t,e,s)=>n("li",{class:t,html:`<a href="#" data-page="${e}">${s}</a>`}),l=(t,e)=>{let s,a;1===e?(s=0,a=t.length):-1===e&&(s=t.length-1,a=-1);for(let i=!0;i;){i=!1;for(let n=s;n!=a;n+=e)if(t[n+e]&&t[n].value>t[n+e].value){const s=t[n],a=t[n+e],r=s;t[n]=a,t[n+e]=r,i=!0}}return t};class h{constructor(t,e){return this.dt=t,this.rows=e,this}build(t){const e=n("tr");let s=this.dt.headings;return s.length||(s=t.map(()=>"")),s.forEach((s,a)=>{const i=n("td");t[a]&&t[a].length||(t[a]=""),i.innerHTML=t[a],i.data=t[a],e.appendChild(i)}),e}render(t){return t}add(t){if(Array.isArray(t)){const e=this.dt;Array.isArray(t[0])?t.forEach(t=>{e.data.push(this.build(t))}):e.data.push(this.build(t)),e.data.length&&(e.hasRows=!0),this.update(),e.columns().rebuild()}}remove(t){const e=this.dt;Array.isArray(t)?(t.sort((t,e)=>e-t),t.forEach(t=>{e.data.splice(t,1)})):"all"==t?e.data=[]:e.data.splice(t,1),e.data.length||(e.hasRows=!1),this.update(),e.columns().rebuild()}update(){this.dt.data.forEach((t,e)=>{t.dataIndex=e})}}class d{constructor(t){return this.dt=t,this}swap(t){if(t.length&&2===t.length){const e=[];this.dt.headings.forEach((t,s)=>{e.push(s)});const s=t[0],a=t[1],i=e[a];e[a]=e[s],e[s]=i,this.order(e)}}order(t){let e,s,a,i,n,r,o;const l=[[],[],[],[]],h=this.dt;t.forEach((t,a)=>{n=h.headings[t],r="false"!==n.getAttribute("data-sortable"),e=n.cloneNode(!0),e.originalCellIndex=a,e.sortable=r,l[0].push(e),h.hiddenColumns.includes(t)||(s=n.cloneNode(!0),s.originalCellIndex=a,s.sortable=r,l[1].push(s))}),h.data.forEach((e,s)=>{a=e.cloneNode(!1),i=e.cloneNode(!1),a.dataIndex=i.dataIndex=s,null!==e.searchIndex&&void 0!==e.searchIndex&&(a.searchIndex=i.searchIndex=e.searchIndex),t.forEach(t=>{o=e.cells[t].cloneNode(!0),o.data=e.cells[t].data,a.appendChild(o),h.hiddenColumns.includes(t)||(o=e.cells[t].cloneNode(!0),o.data=e.cells[t].data,i.appendChild(o))}),l[2].push(a),l[3].push(i)}),h.headings=l[0],h.activeHeadings=l[1],h.data=l[2],h.activeRows=l[3],h.update()}hide(t){if(t.length){const e=this.dt;t.forEach(t=>{e.hiddenColumns.includes(t)||e.hiddenColumns.push(t)}),this.rebuild()}}show(t){if(t.length){let e;const s=this.dt;t.forEach(t=>{e=s.hiddenColumns.indexOf(t),e>-1&&s.hiddenColumns.splice(e,1)}),this.rebuild()}}visible(t){let e;const s=this.dt;return t=t||s.headings.map(t=>t.originalCellIndex),isNaN(t)?Array.isArray(t)&&(e=[],t.forEach(t=>{e.push(!s.hiddenColumns.includes(t))})):e=!s.hiddenColumns.includes(t),e}add(t){let e;const s=document.createElement("th");if(!this.dt.headings.length)return this.dt.insert({headings:[t.heading],data:t.data.map(t=>[t])}),void this.rebuild();this.dt.hiddenHeader?s.innerHTML="":t.heading.nodeName?s.appendChild(t.heading):s.innerHTML=t.heading,this.dt.headings.push(s),this.dt.data.forEach((s,a)=>{t.data[a]&&(e=document.createElement("td"),t.data[a].nodeName?e.appendChild(t.data[a]):e.innerHTML=t.data[a],e.data=e.innerHTML,t.render&&(e.innerHTML=t.render.call(this,e.data,e,s)),s.appendChild(e))}),t.type&&s.setAttribute("data-type",t.type),t.format&&s.setAttribute("data-format",t.format),t.hasOwnProperty("sortable")&&(s.sortable=t.sortable,s.setAttribute("data-sortable",!0===t.sortable?"true":"false")),this.rebuild(),this.dt.renderHeader()}remove(t){Array.isArray(t)?(t.sort((t,e)=>e-t),t.forEach(t=>this.remove(t))):(this.dt.headings.splice(t,1),this.dt.data.forEach(e=>{e.removeChild(e.cells[t])})),this.rebuild()}filter(t,e,s,a){const i=this.dt;if(Array.isArray(a)&&!i.filterState||i.filterState&&i.filterState.filterTerms.every(t=>a.includes(t))){const t=[...a,""];i.filterState={originalData:i.data,filterTerms:t,nextTerm:function(){let e=0;return()=>t[e++%(a.length+1)]}()}}const n=i.filterState.nextTerm();let r;return r=""===n?i.filterState.originalData:Array.from(i.filterState.originalData).filter(e=>{const s=e.cells[t];return(s.hasAttribute("data-content")?s.getAttribute("data-content"):s.innerText)===n}),i.data=r,this.rebuild(),i.update(),s||i.emit("datatable.sort",t,e),n}sort(t,e,a){const i=this.dt;if(i.hasHeadings&&(t<0||t>i.headings.length))return!1;const n=i.options.filters&&i.options.filters[i.headings[t].textContent];if(n&&0!==n.length)return void this.filter(t,e,a,n);i.sorting=!0;let r=i.data;const o=[],h=[];let d=0,c=0;const p=i.headings[t];let u=t=>t;const g=[];if("date"===p.getAttribute("data-type")){let t=!1;p.hasAttribute("data-format")&&(t=p.getAttribute("data-format")),g.push(s.e(1).then(s.bind(null,2)).then(({parseDate:e})=>{u=s=>e(s,t)}))}Promise.all(g).then(()=>{let s,n;Array.from(r).forEach(e=>{const s=e.cells[t],a=s.hasAttribute("data-content")?s.getAttribute("data-content"):s.innerText,i=u("string"==typeof a?a.replace(/(\$|,|\s|%)/g,""):a);parseFloat(i)==i?h[c++]={value:Number(i),row:e}:o[d++]={value:a,row:e}}),e||(e=p.classList.contains("asc")?"desc":"asc"),"desc"==e?(s=l(o,-1),n=l(h,-1),p.classList.remove("asc"),p.classList.add("desc")):(s=l(h,1),n=l(o,1),p.classList.remove("desc"),p.classList.add("asc")),i.lastTh&&p!=i.lastTh&&(i.lastTh.classList.remove("desc"),i.lastTh.classList.remove("asc")),i.lastTh=p,r=s.concat(n),i.data=[];const g=[];r.forEach((t,e)=>{i.data.push(t.row),null!==t.row.searchIndex&&void 0!==t.row.searchIndex&&g.push(e)}),i.searchData=g,this.rebuild(),i.update(),a||i.emit("datatable.sort",t,e)})}rebuild(){let t,e,s,a;const i=this.dt,n=[];i.activeRows=[],i.activeHeadings=[],i.headings.forEach((t,e)=>{t.originalCellIndex=e,t.sortable="false"!==t.getAttribute("data-sortable"),i.hiddenColumns.includes(e)||i.activeHeadings.push(t)}),i.data.forEach((r,o)=>{t=r.cloneNode(!1),e=r.cloneNode(!1),t.dataIndex=e.dataIndex=o,null!==r.searchIndex&&void 0!==r.searchIndex&&(t.searchIndex=e.searchIndex=r.searchIndex),Array.from(r.cells).forEach(n=>{s=n.cloneNode(!0),s.data=n.data,t.appendChild(s),i.hiddenColumns.includes(s.cellIndex)||(a=s.cloneNode(!0),a.data=s.data,e.appendChild(a))}),n.push(t),i.activeRows.push(e)}),i.data=n,i.update()}}const c=function(t){let e=!1,s=!1;if((t=t||this.options.data).headings){e=n("thead");const s=n("tr");t.headings.forEach(t=>{const e=n("th",{html:t});s.appendChild(e)}),e.appendChild(s)}t.data&&t.data.length&&(s=n("tbody"),t.data.forEach(e=>{if(t.headings&&t.headings.length!==e.length)throw new Error("The number of rows do not match the number of headings.");const a=n("tr");e.forEach(t=>{const e=n("td",{html:t});a.appendChild(e)}),s.appendChild(a)})),e&&(null!==this.table.tHead&&this.table.removeChild(this.table.tHead),this.table.appendChild(e)),s&&(this.table.tBodies.length&&this.table.removeChild(this.table.tBodies[0]),this.table.appendChild(s))},p={sortable:!0,searchable:!0,paging:!0,perPage:10,perPageSelect:[5,10,15,20,25],nextPrev:!0,firstLast:!1,prevText:"&lsaquo;",nextText:"&rsaquo;",firstText:"&laquo;",lastText:"&raquo;",ellipsisText:"&hellip;",ascText:"▴",descText:"▾",truncatePager:!0,pagerDelta:2,scrollY:"",fixedColumns:!0,fixedHeight:!1,header:!0,footer:!1,labels:{placeholder:"Search...",perPage:"{select} entries per page",noRows:"No entries found",info:"Showing {start} to {end} of {rows} entries"},layout:{top:"{select}{search}",bottom:"{info}{pager}"}};class u{constructor(t,e={}){if(this.initialized=!1,this.options={...p,...e,layout:{...p.layout,...e.layout},labels:{...p.labels,...e.labels}},"string"==typeof t&&(t=document.querySelector(t)),this.initialLayout=t.innerHTML,this.initialSortable=this.options.sortable,this.options.header||(this.options.sortable=!1),null===t.tHead&&(!this.options.data||this.options.data&&!this.options.data.headings)&&(this.options.sortable=!1),t.tBodies.length&&!t.tBodies[0].rows.length&&this.options.data&&!this.options.data.data)throw new Error("You seem to be using the data option, but you've not defined any rows.");this.table=t,this.init()}static extend(t,e){"function"==typeof e?u.prototype[t]=e:u[t]=e}init(t){if(this.initialized||this.table.classList.contains("dataTable-table"))return!1;Object.assign(this.options,t||{}),this.currentPage=1,this.onFirstPage=!0,this.hiddenColumns=[],this.columnRenderers=[],this.selectedColumns=[],this.render(),setTimeout(()=>{this.emit("datatable.init"),this.initialized=!0,this.options.plugins&&Object.entries(this.options.plugins).forEach(([t,e])=>{this[t]&&"function"==typeof this[t]&&(this[t]=this[t](e,{createElement:n}),e.enabled&&this[t].init&&"function"==typeof this[t].init&&this[t].init())})},10)}render(t){if(t){switch(t){case"page":this.renderPage();break;case"pager":this.renderPager();break;case"header":this.renderHeader()}return!1}const e=this.options;let s="";if(e.data&&c.call(this),e.ajax){const t=e.ajax,s=new XMLHttpRequest,a=t=>{this.emit("datatable.ajax.progress",t,s)},i=e=>{if(4===s.readyState)if(this.emit("datatable.ajax.loaded",e,s),200===s.status){const a={};a.data=t.load?t.load.call(this,s):s.responseText,a.type="json",t.content&&t.content.type&&(a.type=t.content.type,Object.assign(a,t.content)),this.import(a),this.setColumns(!0),this.emit("datatable.ajax.success",e,s)}else this.emit("datatable.ajax.error",e,s)},n=t=>{this.emit("datatable.ajax.error",t,s)},r=t=>{this.emit("datatable.ajax.abort",t,s)};s.addEventListener("progress",a,!1),s.addEventListener("load",i,!1),s.addEventListener("error",n,!1),s.addEventListener("abort",r,!1),this.emit("datatable.ajax.loading",s),s.open("GET","string"==typeof t?e.ajax:e.ajax.url),s.send()}if(this.body=this.table.tBodies[0],this.head=this.table.tHead,this.foot=this.table.tFoot,this.body||(this.body=n("tbody"),this.table.appendChild(this.body)),this.hasRows=this.body.rows.length>0,!this.head){const t=n("thead"),s=n("tr");this.hasRows&&(Array.from(this.body.rows[0].cells).forEach(()=>{s.appendChild(n("th"))}),t.appendChild(s)),this.head=t,this.table.insertBefore(this.head,this.body),this.hiddenHeader=!e.ajax}if(this.headings=[],this.hasHeadings=this.head.rows.length>0,this.hasHeadings&&(this.header=this.head.rows[0],this.headings=[].slice.call(this.header.cells)),e.header||this.head&&this.table.removeChild(this.table.tHead),e.footer?this.head&&!this.foot&&(this.foot=n("tfoot",{html:this.head.innerHTML}),this.table.appendChild(this.foot)):this.foot&&this.table.removeChild(this.table.tFoot),this.wrapper=n("div",{class:"dataTable-wrapper dataTable-loading"}),s+="<div class='dataTable-top'>",s+=e.layout.top,s+="</div>",e.scrollY.length?s+=`<div class='dataTable-container' style='height: ${e.scrollY}; overflow-Y: auto;'></div>`:s+="<div class='dataTable-container'></div>",s+="<div class='dataTable-bottom'>",s+=e.layout.bottom,s+="</div>",s=s.replace("{info}",e.paging?"<div class='dataTable-info'></div>":""),e.paging&&e.perPageSelect){let t="<div class='dataTable-dropdown'><label>";t+=e.labels.perPage,t+="</label></div>";const a=n("select",{class:"dataTable-selector"});e.perPageSelect.forEach(t=>{const s=t===e.perPage,i=new Option(t,t,s,s);a.add(i)}),t=t.replace("{select}",a.outerHTML),s=s.replace("{select}",t)}else s=s.replace("{select}","");if(e.searchable){const t=`<div class='dataTable-search'><input class='dataTable-input' placeholder='${e.labels.placeholder}' type='text'></div>`;s=s.replace("{search}",t)}else s=s.replace("{search}","");this.hasHeadings&&this.render("header"),this.table.classList.add("dataTable-table");const a=n("div",{class:"dataTable-pagination"}),i=n("ul");a.appendChild(i),s=s.replace(/\{pager\}/g,a.outerHTML),this.wrapper.innerHTML=s,this.container=this.wrapper.querySelector(".dataTable-container"),this.pagers=this.wrapper.querySelectorAll(".dataTable-pagination"),this.label=this.wrapper.querySelector(".dataTable-info"),this.table.parentNode.replaceChild(this.wrapper,this.table),this.container.appendChild(this.table),this.rect=this.table.getBoundingClientRect(),this.data=Array.from(this.body.rows),this.activeRows=this.data.slice(),this.activeHeadings=this.headings.slice(),this.update(),e.ajax||this.setColumns(),this.fixHeight(),this.fixColumns(),e.header||this.wrapper.classList.add("no-header"),e.footer||this.wrapper.classList.add("no-footer"),e.sortable&&this.wrapper.classList.add("sortable"),e.searchable&&this.wrapper.classList.add("searchable"),e.fixedHeight&&this.wrapper.classList.add("fixed-height"),e.fixedColumns&&this.wrapper.classList.add("fixed-columns"),this.bindEvents()}renderPage(){if(this.hasHeadings&&(r(this.header),this.activeHeadings.forEach(t=>this.header.appendChild(t))),this.hasRows&&this.totalPages){this.currentPage>this.totalPages&&(this.currentPage=1);const t=this.currentPage-1,e=document.createDocumentFragment();this.pages[t].forEach(t=>e.appendChild(this.rows().render(t))),this.clear(e),this.onFirstPage=1===this.currentPage,this.onLastPage=this.currentPage===this.lastPage}else this.setMessage(this.options.labels.noRows);let t,e=0,s=0,a=0;if(this.totalPages&&(e=this.currentPage-1,s=e*this.options.perPage,a=s+this.pages[e].length,s+=1,t=this.searching?this.searchData.length:this.data.length),this.label&&this.options.labels.info.length){const e=this.options.labels.info.replace("{start}",s).replace("{end}",a).replace("{page}",this.currentPage).replace("{pages}",this.totalPages).replace("{rows}",t);this.label.innerHTML=t?e:""}1==this.currentPage&&this.fixHeight()}renderPager(){if(r(this.pagers),this.totalPages>1){const t="pager",e=document.createDocumentFragment(),s=this.onFirstPage?1:this.currentPage-1,a=this.onLastPage?this.totalPages:this.currentPage+1;this.options.firstLast&&e.appendChild(o(t,1,this.options.firstText)),this.options.nextPrev&&e.appendChild(o(t,s,this.options.prevText));let i=this.links;this.options.truncatePager&&(i=((t,e,s,a,i)=>{let r;const o=2*(a=a||2);let l=e-a,h=e+a;const d=[],c=[];e<4-a+o?h=3+o:e>s-(3-a+o)&&(l=s-(2+o));for(let e=1;e<=s;e++)if(1==e||e==s||e>=l&&e<=h){const s=t[e-1];s.classList.remove("active"),d.push(s)}return d.forEach(e=>{const s=e.children[0].getAttribute("data-page");if(r){const e=r.children[0].getAttribute("data-page");if(s-e==2)c.push(t[e]);else if(s-e!=1){const t=n("li",{class:"ellipsis",html:`<a href="#">${i}</a>`});c.push(t)}}c.push(e),r=e}),c})(this.links,this.currentPage,this.pages.length,this.options.pagerDelta,this.options.ellipsisText)),this.links[this.currentPage-1].classList.add("active"),i.forEach(t=>{t.classList.remove("active"),e.appendChild(t)}),this.links[this.currentPage-1].classList.add("active"),this.options.nextPrev&&e.appendChild(o(t,a,this.options.nextText)),this.options.firstLast&&e.appendChild(o(t,this.totalPages,this.options.lastText)),this.pagers.forEach(t=>{t.appendChild(e.cloneNode(!0))})}}renderHeader(){this.labels=[],this.headings&&this.headings.length&&this.headings.forEach((t,e)=>{if(this.labels[e]=t.textContent,t.firstElementChild&&t.firstElementChild.classList.contains("dataTable-sorter")&&(t.innerHTML=t.firstElementChild.innerHTML),t.sortable="false"!==t.getAttribute("data-sortable"),t.originalCellIndex=e,this.options.sortable&&t.sortable){const e=n("a",{href:"#",class:"dataTable-sorter",html:t.innerHTML});t.innerHTML="",t.setAttribute("data-sortable",""),t.appendChild(e)}}),this.fixColumns()}bindEvents(){const t=this.options;if(t.perPageSelect){const e=this.wrapper.querySelector(".dataTable-selector");e&&e.addEventListener("change",()=>{t.perPage=parseInt(e.value,10),this.update(),this.fixHeight(),this.emit("datatable.perpage",t.perPage)},!1)}t.searchable&&(this.input=this.wrapper.querySelector(".dataTable-input"),this.input&&this.input.addEventListener("keyup",()=>this.search(this.input.value),!1)),this.wrapper.addEventListener("click",e=>{const s=e.target;"a"===s.nodeName.toLowerCase()&&(s.hasAttribute("data-page")?(this.page(s.getAttribute("data-page")),e.preventDefault()):t.sortable&&s.classList.contains("dataTable-sorter")&&"false"!=s.parentNode.getAttribute("data-sortable")&&(this.columns().sort(this.headings.indexOf(s.parentNode)),e.preventDefault()))},!1),window.addEventListener("resize",()=>{this.rect=this.container.getBoundingClientRect(),this.fixColumns()})}setColumns(t){t||this.data.forEach(t=>{Array.from(t.cells).forEach(t=>{t.data=t.innerHTML})}),this.options.columns&&this.headings.length&&this.options.columns.forEach(t=>{Array.isArray(t.select)||(t.select=[t.select]),t.hasOwnProperty("render")&&"function"==typeof t.render&&(this.selectedColumns=this.selectedColumns.concat(t.select),this.columnRenderers.push({columns:t.select,renderer:t.render})),t.select.forEach(e=>{const s=this.headings[e];t.type&&s.setAttribute("data-type",t.type),t.format&&s.setAttribute("data-format",t.format),t.hasOwnProperty("sortable")&&s.setAttribute("data-sortable",t.sortable),t.hasOwnProperty("hidden")&&!1!==t.hidden&&this.columns().hide([e]),t.hasOwnProperty("sort")&&1===t.select.length&&this.columns().sort(t.select[0],t.sort,!0)})}),this.hasRows&&(this.data.forEach((t,e)=>{t.dataIndex=e,Array.from(t.cells).forEach(t=>{t.data=t.innerHTML})}),this.selectedColumns.length&&this.data.forEach(t=>{Array.from(t.cells).forEach((e,s)=>{this.selectedColumns.includes(s)&&this.columnRenderers.forEach(a=>{a.columns.includes(s)&&(e.innerHTML=a.renderer.call(this,e.data,e,t))})})}),this.columns().rebuild()),this.render("header")}destroy(){this.table.innerHTML=this.initialLayout,this.table.classList.remove("dataTable-table"),this.wrapper.parentNode.replaceChild(this.table,this.wrapper),this.initialized=!1}update(){this.wrapper.classList.remove("dataTable-empty"),this.paginate(this),this.render("page"),this.links=[];let t=this.pages.length;for(;t--;){const e=t+1;this.links[t]=o(0===t?"active":"",e,e)}this.sorting=!1,this.render("pager"),this.rows().update(),this.emit("datatable.update")}paginate(){const t=this.options.perPage;let e=this.activeRows;return this.searching&&(e=[],this.searchData.forEach(t=>e.push(this.activeRows[t]))),this.options.paging?this.pages=e.map((s,a)=>a%t==0?e.slice(a,a+t):null).filter(t=>t):this.pages=[e],this.totalPages=this.lastPage=this.pages.length,this.totalPages}fixColumns(){if((this.options.scrollY.length||this.options.fixedColumns)&&this.activeHeadings&&this.activeHeadings.length){let t,e=!1;if(this.columnWidths=[],this.table.tHead){if(this.options.scrollY.length&&(e=n("thead"),e.appendChild(n("tr")),e.style.height="0px",this.headerTable&&(this.table.tHead=this.headerTable.tHead)),this.activeHeadings.forEach(t=>{t.style.width=""}),this.activeHeadings.forEach((t,s)=>{const a=t.offsetWidth,i=a/this.rect.width*100;if(t.style.width=i+"%",this.columnWidths[s]=a,this.options.scrollY.length){const t=n("th");e.firstElementChild.appendChild(t),t.style.width=i+"%",t.style.paddingTop="0",t.style.paddingBottom="0",t.style.border="0"}}),this.options.scrollY.length){const t=this.table.parentElement;if(!this.headerTable){this.headerTable=n("table",{class:"dataTable-table"});const e=n("div",{class:"dataTable-headercontainer"});e.appendChild(this.headerTable),t.parentElement.insertBefore(e,t)}const s=this.table.tHead;this.table.replaceChild(e,s),this.headerTable.tHead=s,this.headerTable.parentElement.style.paddingRight=this.headerTable.clientWidth-this.table.clientWidth+parseInt(this.headerTable.parentElement.style.paddingRight||"0",10)+"px",t.scrollHeight>t.clientHeight&&(t.style.overflowY="scroll")}}else{t=[],e=n("thead");const s=n("tr");Array.from(this.table.tBodies[0].rows[0].cells).forEach(()=>{const e=n("th");s.appendChild(e),t.push(e)}),e.appendChild(s),this.table.insertBefore(e,this.body);const a=[];t.forEach((t,e)=>{const s=t.offsetWidth,i=s/this.rect.width*100;a.push(i),this.columnWidths[e]=s}),this.data.forEach(t=>{Array.from(t.cells).forEach((t,e)=>{this.columns(t.cellIndex).visible()&&(t.style.width=a[e]+"%")})}),this.table.removeChild(e)}}}fixHeight(){this.options.fixedHeight&&(this.container.style.height=null,this.rect=this.container.getBoundingClientRect(),this.container.style.height=this.rect.height+"px")}search(t){return!!this.hasRows&&(t=t.toLowerCase(),this.currentPage=1,this.searching=!0,this.searchData=[],t.length?(this.clear(),this.data.forEach((e,s)=>{const a=this.searchData.includes(e);t.split(" ").reduce((t,s)=>{let a=!1,i=null,n=null;for(let t=0;t<e.cells.length;t++)if(i=e.cells[t],n=i.hasAttribute("data-content")?i.getAttribute("data-content"):i.textContent,n.toLowerCase().includes(s)&&this.columns(i.cellIndex).visible()){a=!0;break}return t&&a},!0)&&!a?(e.searchIndex=s,this.searchData.push(s)):e.searchIndex=null}),this.wrapper.classList.add("search-results"),this.searchData.length?this.update():(this.wrapper.classList.remove("search-results"),this.setMessage(this.options.labels.noRows)),void this.emit("datatable.search",t,this.searchData)):(this.searching=!1,this.update(),this.emit("datatable.search",t,this.searchData),this.wrapper.classList.remove("search-results"),!1))}page(t){return t!=this.currentPage&&(isNaN(t)||(this.currentPage=parseInt(t,10)),!(t>this.pages.length||t<0)&&(this.render("page"),this.render("pager"),void this.emit("datatable.page",t)))}sortColumn(t,e){this.columns().sort(t,e)}insert(t){let e=[];if(i(t)){if(t.headings&&!this.hasHeadings&&!this.hasRows){const e=n("tr");t.headings.forEach(t=>{const s=n("th",{html:t});e.appendChild(s)}),this.head.appendChild(e),this.header=e,this.headings=[].slice.call(e.cells),this.hasHeadings=!0,this.options.sortable=this.initialSortable,this.render("header"),this.activeHeadings=this.headings.slice()}t.data&&Array.isArray(t.data)&&(e=t.data)}else Array.isArray(t)&&t.forEach(t=>{const s=[];Object.entries(t).forEach(([t,e])=>{const a=this.labels.indexOf(t);a>-1&&(s[a]=e)}),e.push(s)});e.length&&(this.rows().add(e),this.hasRows=!0),this.update(),this.setColumns(),this.fixColumns()}refresh(){this.options.searchable&&(this.input.value="",this.searching=!1),this.currentPage=1,this.onFirstPage=!0,this.update(),this.emit("datatable.refresh")}clear(t){this.body&&r(this.body);let e=this.body;if(this.body||(e=this.table),t){if("string"==typeof t){document.createDocumentFragment().innerHTML=t}e.appendChild(t)}}export(t){if(!this.hasHeadings&&!this.hasRows)return!1;const e=this.activeHeadings;let s=[];const a=[];let n,r,o,l;if(!i(t))return!1;const h={download:!0,skipColumn:[],lineDelimiter:"\n",columnDelimiter:",",tableName:"myTable",replacer:null,space:4,...t};if(h.type){if("txt"!==h.type&&"csv"!==h.type||(s[0]=this.header),h.selection)if(isNaN(h.selection)){if(Array.isArray(h.selection))for(n=0;n<h.selection.length;n++)s=s.concat(this.pages[h.selection[n]-1])}else s=s.concat(this.pages[h.selection-1]);else s=s.concat(this.activeRows);if(s.length){if("txt"===h.type||"csv"===h.type){for(o="",n=0;n<s.length;n++){for(r=0;r<s[n].cells.length;r++)if(!h.skipColumn.includes(e[r].originalCellIndex)&&this.columns(e[r].originalCellIndex).visible()){let t=s[n].cells[r].textContent;t=t.trim(),t=t.replace(/\s{2,}/g," "),t=t.replace(/\n/g,"  "),t=t.replace(/"/g,'""'),t=t.replace(/#/g,"%23"),t.includes(",")&&(t=`"${t}"`),o+=t+h.columnDelimiter}o=o.trim().substring(0,o.length-1),o+=h.lineDelimiter}o=o.trim().substring(0,o.length-1),h.download&&(o="data:text/csv;charset=utf-8,"+o)}else if("sql"===h.type){for(o=`INSERT INTO \`${h.tableName}\` (`,n=0;n<e.length;n++)!h.skipColumn.includes(e[n].originalCellIndex)&&this.columns(e[n].originalCellIndex).visible()&&(o+=`\`${e[n].textContent}\`,`);for(o=o.trim().substring(0,o.length-1),o+=") VALUES ",n=0;n<s.length;n++){for(o+="(",r=0;r<s[n].cells.length;r++)!h.skipColumn.includes(e[r].originalCellIndex)&&this.columns(e[r].originalCellIndex).visible()&&(o+=`"${s[n].cells[r].textContent}",`);o=o.trim().substring(0,o.length-1),o+="),"}o=o.trim().substring(0,o.length-1),o+=";",h.download&&(o="data:application/sql;charset=utf-8,"+o)}else if("json"===h.type){for(r=0;r<s.length;r++)for(a[r]=a[r]||{},n=0;n<e.length;n++)!h.skipColumn.includes(e[n].originalCellIndex)&&this.columns(e[n].originalCellIndex).visible()&&(a[r][e[n].textContent]=s[r].cells[n].textContent);o=JSON.stringify(a,h.replacer,h.space),h.download&&(o="data:application/json;charset=utf-8,"+o)}return h.download&&(h.filename=h.filename||"datatable_export",h.filename+="."+h.type,o=encodeURI(o),l=document.createElement("a"),l.href=o,l.download=h.filename,document.body.appendChild(l),l.click(),document.body.removeChild(l)),o}}return!1}import(t){let e=!1;if(!i(t))return!1;const s={lineDelimiter:"\n",columnDelimiter:",",...t};if(s.data.length||i(s.data)){if("csv"===s.type){e={data:[]};const t=s.data.split(s.lineDelimiter);t.length&&(s.headings&&(e.headings=t[0].split(s.columnDelimiter),t.shift()),t.forEach((t,a)=>{e.data[a]=[];const i=t.split(s.columnDelimiter);i.length&&i.forEach(t=>{e.data[a].push(t)})}))}else if("json"===s.type){const t=(t=>{let e=!1;try{e=JSON.parse(t)}catch(t){return!1}return!(null===e||!Array.isArray(e)&&!i(e))&&e})(s.data);t&&(e={headings:[],data:[]},t.forEach((t,s)=>{e.data[s]=[],Object.entries(t).forEach(([t,a])=>{e.headings.includes(t)||e.headings.push(t),e.data[s].push(a)})}))}i(s.data)&&(e=s.data),e&&this.insert(e)}return!1}print(){const t=this.activeHeadings,e=this.activeRows,s=n("table"),a=n("thead"),i=n("tbody"),r=n("tr");t.forEach(t=>{r.appendChild(n("th",{html:t.textContent}))}),a.appendChild(r),e.forEach(t=>{const e=n("tr");Array.from(t.cells).forEach(t=>{e.appendChild(n("td",{html:t.textContent}))}),i.appendChild(e)}),s.appendChild(a),s.appendChild(i);const o=window.open();o.document.body.appendChild(s),o.print()}setMessage(t){let e=1;this.hasRows?e=this.data[0].cells.length:this.activeHeadings.length&&(e=this.activeHeadings.length),this.wrapper.classList.add("dataTable-empty"),this.label&&(this.label.innerHTML=""),this.totalPages=0,this.render("pager"),this.clear(n("tr",{html:`<td class="dataTables-empty" colspan="${e}">${t}</td>`}))}columns(t){return new d(this,t)}rows(t){return new h(this,t)}on(t,e){this.events=this.events||{},this.events[t]=this.events[t]||[],this.events[t].push(e)}off(t,e){this.events=this.events||{},t in this.events!=!1&&this.events[t].splice(this.events[t].indexOf(e),1)}emit(t){if(this.events=this.events||{},t in this.events!=!1)for(let e=0;e<this.events[t].length;e++)this.events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}}var g=function(t){const e=["geometry","lat","long","cvDataId","created","archived","correctionalFacilityDataId","countyDataId"],s=Object.keys(t[0]).filter(t=>{if(-1==e.indexOf(t))return t});let a=[];for(let e=0;e<t.length;e++){let i=[];for(let a=0;a<s.length;a++)i.push(""+t[e][s[a]]);a.push(i)}return{headings:s,data:a}};var f=class{constructor(){this.elem=document.querySelector(".js-table"),this.dataTable=new u(this.elem,{paging:!1}),this.update=this.update.bind(this)}update(t){this.dataTable.destroy(),this.dataTable=new u(this.elem,{paging:!1});const e=g(t);this.dataTable.insert(e)}};var b=class{constructor(t){this.emitter=t,this.baseURL="https://e7p503ngy5.execute-api.us-west-2.amazonaws.com/prod/",this.getCounties=this.getCounties.bind(this),this.getStateData=this.getStateData.bind(this),this.getZipCodeData=this.getZipCodeData.bind(this),this.getCorrectionalData=this.getCorrectionalData.bind(this),this.getCountyHistorical=this.getCountyHistorical.bind(this)}async getCounties(){console.log("fetching county data");const t=await fetch(this.baseURL+"GetCounties"),e=await t.json();this.emitter.emit("county-data",e.data),this.emitter.emit("set-name","nmdoh_covid_county_data")}async getCountyHistorical(t){console.log("fetching county data");const e=await fetch(`${this.baseURL}GetCountyDataByDay?countyId=${t}`);return await e.json()}async getStateHistorical(){console.log("fetching state data");const t=await fetch(this.baseURL+"GetCvDataByDay");return await t.json()}async getStateData(){console.log("fetching state data");const t=await fetch(this.baseURL+"GetPublicStatewideData"),e=await t.json();e.data.updated=new Date(e.data.updated).toLocaleDateString(),this.emitter.emit("state-data",[e.data]),this.emitter.emit("set-name","nmdoh_covid_state_data")}async getZipCodeData(){console.log("fetching zip code data");const t=await fetch(this.baseURL+"GetPublicZipsData"),e=await t.json();this.emitter.emit("zip-code-data",e.data),this.emitter.emit("set-name","nmdoh_covid_zip_code_data")}async getCorrectionalData(){console.log("fetching correctional facility data");const t=await fetch(this.baseURL+"GetCorrectionalFacilities"),e=await t.json();this.emitter.emit("correctional-data",e.data),this.emitter.emit("set-name","nmdoh_covid_correctional_facility_data")}};function m(t,e){const s=encodeURI("data:text/csv;charset=utf-8,"+t),a=document.createElement("a");a.setAttribute("href",s),a.setAttribute("download",e),a.classList.add("hidden"),document.body.appendChild(a),a.click()}class y{constructor(){this.elem=document.querySelector(".js-download-btn"),this.name="",this.rows=[],this.addEventListeners=this.addEventListeners.bind(this),this.onClick=this.onClick.bind(this),this.setContent=this.setContent.bind(this),this.setName=this.setName.bind(this),this.elem.addEventListener("click",this.onClick)}setName(t){this.name=t+".csv"}setContent(t){const e=g(t),s=[e.headings,...e.data];this.rows=s}onClick(){m(this.rows.map(t=>t.join(",")).join("\n"),this.name)}}class v{constructor(t,e){this.elem=t,this.client=e,this.name=this.elem.innerText,this.countyId=this.elem.getAttribute("data-county-id"),this.addEventListeners=this.addEventListeners.bind(this),this.onClick=this.onClick.bind(this),this.elem.addEventListener("click",this.onClick)}onClick(t){t.preventDefault(),this.client.getCountyHistorical(this.countyId).then(t=>{const e=g(t.data);m([e.headings,...e.data].map(t=>t.join(",")).join("\n"),this.name)})}}class C{constructor(t,e){this.elem=t,this.client=e,this.addEventListeners=this.addEventListeners.bind(this),this.onClick=this.onClick.bind(this),this.elem.addEventListener("click",this.onClick)}onClick(t){t.preventDefault(),this.client.getStateHistorical().then(t=>{const e=g(t.data);m([e.headings,...e.data].map(t=>t.join(",")).join("\n"),"nm_statewide_covid_data.csv")})}}{const t=a(),e=new b(t),s=new f,i=new y;t.on("state-data",s.update),t.on("state-data",i.setContent),t.on("county-data",s.update),t.on("county-data",i.setContent),t.on("set-name",i.setName),t.on("zip-code-data",s.update),t.on("correctional-data",s.update);const n=document.querySelector(".js-historical-link"),r=document.querySelector(".js-daily-link"),o=document.querySelector(".js-historical-section"),l=document.querySelector(".js-daily-section");new C(document.querySelector(".js-download-statewide-historical-link"),e);const h=document.querySelectorAll(".js-download-county-historical-link");for(const t of h)new v(t,e);n.addEventListener("click",t=>{t.preventDefault();const e=document.querySelector(".section--active");e!==o&&(e.classList.remove("section--active"),o.classList.add("section--active"))}),r.addEventListener("click",t=>{t.preventDefault();const e=document.querySelector(".section--active");e!==l&&(e.classList.remove("section--active"),l.classList.add("section--active"))}),document.querySelector(".js-county-btn").addEventListener("click",()=>e.getCounties()),document.querySelector(".js-state-btn").addEventListener("click",()=>e.getStateData()),document.querySelector(".js-zip-code-btn").addEventListener("click",()=>e.getZipCodeData()),document.querySelector(".js-correctional-btn").addEventListener("click",()=>e.getCorrectionalData()),e.getCounties()}}]);